--- 
layout: post
title: "New Addin: PostSharp and Conversation per Business Transaction"
tags: 
- PostSharp
- uNhAddIns
status: publish
type: post
published: true
meta: 
  blogger_permalink: /2010/03/new-addin-postsharp-and-conversation.html
  blogger_blog: jfromaniello.blogspot.com
  blogger_author: "Jos\xC3\xA9http://www.blogger.com/profile/00939999997597980426noreply@blogger.com"
  blogger_images: "1"
  dsq_thread_id: "314364511"
---
<blockquote>   <p>This post was updated on April 15, please re-read.. :) </p> </blockquote>  <p>I’ve been working on a PostSharp adapter for Conversation per Business Transaction, in <a href="http://code.google.com/p/unhaddins/">unhaddins</a>.</p>  <p>If you want to read more about the pattern, I recommend you Fabio Maulo’s posts:</p>  <p><strong></strong></p>  <ul>   <li><strong>Part I</strong> : <a href="http://fabiomaulo.blogspot.com/2008/12/conversation-per-business-transaction.html">Conversation-per-Business-Transaction</a> </li>    <li><strong>Part II</strong> : <a href="http://fabiomaulo.blogspot.com/2008/12/implementing-conversation-per-business.html">Implementing Conversation per Business Transaction</a> </li>    <li><strong>Part III</strong> (<em><strong>without</strong> AOP</em>) : <a href="http://fabiomaulo.blogspot.com/2009/01/using-conversation-per-business.html">Using Conversation per Business Transacti</a> </li>    <li><strong>Part IV</strong>: <a href="http://fabiomaulo.blogspot.com/2009/01/aspect-conversation-per.html">Aspect Conversation-per-BusinessTransaction</a> </li> </ul>  <p>Currently there are three adapters for CpBT in unhaddins:</p>  <ul>   <li>Spring.AOP </li>    <li>Castle DynamicProxy </li>    <li>and the brand new for PostSharp </li> </ul>  <p>The technology is different (dynamic subclassing vs il weaving) and so the implementation and usage, but I’ve tried hard to keep the API consistent with the previous versions.</p>  <p>The attribute that you need to use is <strike>[</strike><a href="http://code.google.com/p/unhaddins/source/browse/trunk/uNhAddIns/uNhAddIns.PostSharpAdapters/PersistenceConversationalAttribute.cs"><strike>PsPersistenceConversational</strike></a><strike>]</strike> [<a href="http://code.google.com/p/unhaddins/source/browse/trunk/uNhAddIns/uNhAddIns.PostSharpAdapters/PersistenceConversationalAttribute.cs">PersistenceConversational</a>]. <strike>This attribute could be used on top of the class; this is almost exactly than the previous version PersistenceConversational(MethodsIncludeMode = Implicit. This means that all public methods excluding the constructor, are conversational methods, unless a method with [PsPersistenceConversational(Exclude = True)].</strike> The attribute works almost exactly as the <a href="http://fabiomaulo.blogspot.com/2009/01/aspect-conversation-per.html">original version</a>, key differences:</p>  <ul>   <li>If the MethodsIncludeMode is set to Implicit, all <strong><u>public</u></strong> members (methods or properties, virtual or sealed) are included in the conversation. </li>    <li>In order to exclude a public member when using MethodsIncludeMode = Implicit you must decorate the member with [PersistenceConversation(Exclude = True)], this is the same than the original version. </li>    <li>In order to include a member (public, protected or privated) you must decorate the member with [PersistenceConversation(…)] </li> </ul>  <p><strike>If you want to set explicitly which methods are included in the conversation, you just put the attribute above each conversational method.</strike></p>  <p>This is an example WinForms presenter;</p> <script src="http://gist.github.com/341790.js"></script>  <p>As you can see in the ViewCancelClicked and ViewSaveClicked events handlers, one of the most important advantages of PostSharp is that you can include private members as part of the conversation.</p>  <p><u>Important note;</u> in order to use this addin you must have PostSharp <strike>1.5</strike>&#160; <strong><u>2</u></strong> installed.</p>  <p>I will write an small application soon, this is all for now! If you have any question you can reach me in the <a href="http://groups.google.com/group/unhaddins">unhaddins google group</a>.</p>  <div class="blogger-post-footer">http://feeds.feedburner.com/JoseFRomaniello<img width='1' height='1' src='http://joseoncodecom.ipage.com/wp-content/uploads/images/2935908889399243312-8114373842385656325' alt='' /></div>
