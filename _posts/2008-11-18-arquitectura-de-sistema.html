--- 
layout: post
title: Arquitectura de sistema
tags: []

status: publish
type: post
published: true
meta: 
  blogger_blog: jfromaniello.blogspot.com
  blogger_author: "Jos\xC3\xA9http://www.blogger.com/profile/00939999997597980426noreply@blogger.com"
  blogger_permalink: /2008/11/arquitectura-de-sistema.html
  dsq_thread_id: "313606609"
---
Esta es una idea de arquitectura que me gusta.

Algunas cosas que yo considero no existen antes de empezar:<ul><li>Soluciones mágicas ni herramientas que lo hacen todo. <span class="blsp-spelling-error" id="SPELLING_ERROR_0"><span class="blsp-spelling-error" id="SPELLING_ERROR_0">Olvidate</span></span> de construir una aplicación empresarial con <a href="http://blogs.southworks.net/jcisneros/2008/08/05/aspnet-dynamic-data-scaffolding-with-net/">esto</a> o algo como <a href="http://www.ironspeed.com/">esto</a>.
</li><li>Una arquitectura que funcione bien para todos los casos.</li><li>Una herramienta que sea una <span class="blsp-spelling-error" id="SPELLING_ERROR_1">bala</span> de plata para resolver cualquier problema.</li></ul>Sin embargo, es posible:<ul><li>Construir aplicaciones a partir de modelos probados
</li><li>Construir software sencillo, escalable y <span class="blsp-spelling-error" id="SPELLING_ERROR_2"><span class="blsp-spelling-error" id="SPELLING_ERROR_1">mantenible</span></span>.</li><li>Crear software de calidad.</li><li>Disminuir fricciones que existen en el desarrollo de software.</li><li>Hacer las cosas bien.</li></ul>
La arquitectura básica que voy a explicar, es la siguiente:


<a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://joseoncode.com/wp-content/uploads/2011/06/Dibujo11.png"><img style="margin: 0px auto 10px; display: block; text-align: center; cursor: pointer; width: 320px; height: 303px;" src="http://joseoncode.com/wp-content/uploads/2011/06/Dibujo1.png" alt="" id="BLOGGER_PHOTO_ID_5270205201959698002" border="0" /></a>

<span style="font-weight: bold;font-size:180%;" >Modelo</span>

El modelo es lo que hace a la aplicación ser lo que es. Como ejemplo he agregado dos componentes; entidades y servicios.

<span style="font-size:130%;"><span style="font-weight: bold;">Entidades</span></span>

Las entidades representan las clases de objetos que intervienen en el dominio de nuestro problema. Describen de cierta manera el lenguaje que utilizara nuestra aplicación. Entonces, si en nuestra aplicación intervienen caballos, seguramente tendremos como entidad una clase caballo, lo mismo con facturas, etc. La mayoría de las veces hablamos de objetos con significado en el mundo real artículos, comprobantes de compra, etc.
Dichas entidades usualmente tienen varias propiedades como por ejemplo Código, Descripción, Cantidad, Precio, etc. Las propiedades pueden ser de diferentes tipos:
<ul><li>Tipos básicos del lenguaje de programación, <span class="blsp-spelling-error" id="SPELLING_ERROR_3"><span class="blsp-spelling-error" id="SPELLING_ERROR_2">ej</span></span>: <span class="blsp-spelling-error" id="SPELLING_ERROR_4"><span class="blsp-spelling-error" id="SPELLING_ERROR_3">int</span></span>, <span class="blsp-spelling-error" id="SPELLING_ERROR_5"><span class="blsp-spelling-error" id="SPELLING_ERROR_4">string</span></span>, <span class="blsp-spelling-error" id="SPELLING_ERROR_6"><span class="blsp-spelling-error" id="SPELLING_ERROR_5">float</span></span>, etc.</li><li>Entidades; <span class="blsp-spelling-error" id="SPELLING_ERROR_7"><span class="blsp-spelling-error" id="SPELLING_ERROR_6">ej</span></span>: la clase factura podría tener una propiedad Cliente que a su vez es del tipo Cliente.
</li><li>Colecciones de entidades; <span class="blsp-spelling-error" id="SPELLING_ERROR_8"><span class="blsp-spelling-error" id="SPELLING_ERROR_7">ej</span></span>: la clase factura podría tener una propiedad Lineas, que es una colección <span class="blsp-spelling-corrected" id="SPELLING_ERROR_9">genérica</span>, tipo <span class="blsp-spelling-error" id="SPELLING_ERROR_10"><span class="blsp-spelling-error" id="SPELLING_ERROR_8">IList</span></span><lineafactura> .</lineafactura></li></ul><span class="blsp-spelling-corrected" id="SPELLING_ERROR_11">Además</span> de propiedades poseen <span class="blsp-spelling-corrected" id="SPELLING_ERROR_12">métodos</span> que implementan lógica de negocio. Un <span class="blsp-spelling-corrected" id="SPELLING_ERROR_13">método</span> de la clase Factura, podría ser <span class="blsp-spelling-error" id="SPELLING_ERROR_14"><span class="blsp-spelling-error" id="SPELLING_ERROR_9">CalcularNeto</span></span>.

Lo que es importante mencionar en este punto, es que bajo ningún punto de vista tenemos que pensar una entidad como una tabla o un registro de la base de datos, simplemente es algo mas complejo pero mas aproximado a la realidad.

Por otro lado, es preciso que las entidades sean <a href="http://en.wikipedia.org/wiki/POCO">POCO</a> o <a href="http://es.wikipedia.org/wiki/Plain_Old_Java_Object"><span class="blsp-spelling-error" id="SPELLING_ERROR_15"><span class="blsp-spelling-error" id="SPELLING_ERROR_10">POJO</span></span></a>, es decir, clases simples que no implementen interfaces complejas ni <span class="blsp-spelling-corrected" id="SPELLING_ERROR_16">estén</span> fuertemente ligadas a un <span class="blsp-spelling-error" id="SPELLING_ERROR_17"><span class="blsp-spelling-error" id="SPELLING_ERROR_11">framework</span></span> en particular. De esta manera son <span class="blsp-spelling-corrected" id="SPELLING_ERROR_18">fáciles</span> de mantener, usar y entender. Con lo cual "YO" descartaría completamente la idea de <span class="blsp-spelling-error" id="SPELLING_ERROR_19"><span class="blsp-spelling-error" id="SPELLING_ERROR_12">Datasets</span></span> <span class="blsp-spelling-error" id="SPELLING_ERROR_20"><span class="blsp-spelling-error" id="SPELLING_ERROR_13">Tipados</span></span> y hasta en cierto punto a la propia nueva herramienta de Microsoft, <span class="blsp-spelling-error" id="SPELLING_ERROR_21"><span class="blsp-spelling-error" id="SPELLING_ERROR_14">Entity</span></span> <span class="blsp-spelling-error" id="SPELLING_ERROR_22"><span class="blsp-spelling-error" id="SPELLING_ERROR_15">Framework</span></span>. (Ya lo se, tienen un bonito editor y buen soporte técnico.)

<span style="font-size:130%;"><span style="font-weight: bold;">Servicios</span></span>

Los servicios son objetos que llevan a cabo cierta funcionalidad del sistema. En estos casos la funcionalidad que implementan es demasiado compleja y en algunos casos depende de componentes externos a nuestro sistema, por lo cual resulta <span class="blsp-spelling-error" id="SPELLING_ERROR_23"><span class="blsp-spelling-error" id="SPELLING_ERROR_16">inapropiado</span></span> embeberla en las entidades.
Un ejemplo de servicio, podría ser <span class="blsp-spelling-error" id="SPELLING_ERROR_24"><span class="blsp-spelling-error" id="SPELLING_ERROR_17">ValidadorDeOrdenesCompra</span></span>.

<span style="font-size:180%;"><span style="font-weight: bold;">Interfaz</span></span>

La interfaz de usuario le permite al usuario interactuar con el dominio de la aplicación. El patrón <span class="blsp-spelling-error" id="SPELLING_ERROR_25"><span class="blsp-spelling-error" id="SPELLING_ERROR_18">MVC</span></span> es muy recomendable en sistemas de nivel empresarial. <span class="blsp-spelling-corrected" id="SPELLING_ERROR_26">Básicamente</span>, tenemos 3 componentes interactuando entre si:
<ul><li>Modelo: es lo que se explico previamente, intervienen entidades y servicios.</li><li>Vista: Se encarga solamente de mostrar y capturar los datos de la interfaz <span class="blsp-spelling-corrected" id="SPELLING_ERROR_27">gráfica</span>.</li><li>Controlador: Es quien manejar el flujo de la interfaz de usuario, por ejemplo: toma datos del Modelo y se los asigna a la Vista, toma los datos que la Vista capturo y llama a <span class="blsp-spelling-corrected" id="SPELLING_ERROR_28">métodos</span> del Modelo para persistir los datos.
</li></ul>
<span style="font-size:180%;"><span style="font-weight: bold;">Repositorios</span></span>

En este nivel nos encontramos con funcionalidad para almacenar y recuperar las Entidades del dominio. A simple vista se podría pensar directamente en una base de datos (<span class="blsp-spelling-error" id="SPELLING_ERROR_29"><span class="blsp-spelling-error" id="SPELLING_ERROR_19">DAO</span></span>), pero también existen otras clases de repositorios y me permití mencionar un repositorio que obtenga Entidades de mi dominio desde un <span class="blsp-spelling-error" id="SPELLING_ERROR_30"><span class="blsp-spelling-error" id="SPELLING_ERROR_20">webservice</span></span>.

<span style="font-size:130%;"><span class="blsp-spelling-error" id="SPELLING_ERROR_31"><span class="blsp-spelling-error" id="SPELLING_ERROR_21">DAO</span></span></span>

Un <span class="blsp-spelling-error" id="SPELLING_ERROR_32"><span class="blsp-spelling-error" id="SPELLING_ERROR_22">DAO</span></span>, Data <span class="blsp-spelling-error" id="SPELLING_ERROR_33"><span class="blsp-spelling-error" id="SPELLING_ERROR_23">Access</span></span> <span class="blsp-spelling-error" id="SPELLING_ERROR_34"><span class="blsp-spelling-error" id="SPELLING_ERROR_24">Object</span></span>, posee la funcionalidad necesaria para guardar y recuperar las Entidades en una base de datos.
En el objeto <span class="blsp-spelling-error" id="SPELLING_ERROR_35"><span class="blsp-spelling-error" id="SPELLING_ERROR_25">DAO</span></span> se encapsula la funcionalidad para interactuar con la base de datos.
Cada <span class="blsp-spelling-error" id="SPELLING_ERROR_36"><span class="blsp-spelling-error" id="SPELLING_ERROR_26">DAO</span></span>, se encargará de solo una entidad, pero es posible que existan entidades sin su correspondiente <span class="blsp-spelling-error" id="SPELLING_ERROR_37"><span class="blsp-spelling-error" id="SPELLING_ERROR_27">DAO</span></span> (simplemente no necesitan ser <span class="blsp-spelling-error" id="SPELLING_ERROR_38">almacenadas</span>).
Así, la interfaz de una clase <span class="blsp-spelling-error" id="SPELLING_ERROR_39"><span class="blsp-spelling-error" id="SPELLING_ERROR_28">dao</span></span> para una entidad Factura podría contener los siguientes <span class="blsp-spelling-corrected" id="SPELLING_ERROR_40">métodos</span>:
<ul><li><span class="blsp-spelling-error" id="SPELLING_ERROR_41"><span class="blsp-spelling-error" id="SPELLING_ERROR_29">ObtenerPorNumero</span></span>(<span class="blsp-spelling-error" id="SPELLING_ERROR_42"><span class="blsp-spelling-error" id="SPELLING_ERROR_30">NroFactura</span></span>) as Factura
</li><li><span class="blsp-spelling-error" id="SPELLING_ERROR_43"><span class="blsp-spelling-error" id="SPELLING_ERROR_31">ObtenerTodos</span></span>() as <span class="blsp-spelling-error" id="SPELLING_ERROR_44"><span class="blsp-spelling-error" id="SPELLING_ERROR_32">IList</span></span><factura></factura></li><li><span class="blsp-spelling-error" id="SPELLING_ERROR_45"><span class="blsp-spelling-error" id="SPELLING_ERROR_33">ObtenerPorMes</span></span>(Mes) as <span class="blsp-spelling-error" id="SPELLING_ERROR_46"><span class="blsp-spelling-error" id="SPELLING_ERROR_34">IList</span></span><factura></factura></li><li>Guardar(Factura)</li><li>Eliminar(Factura)</li></ul>Lo que es importante destacar es que hasta esta clase llega todo lo relacionado a la base de datos. Es bastante <span class="blsp-spelling-error" id="SPELLING_ERROR_47"><span class="blsp-spelling-error" id="SPELLING_ERROR_35">inapropiado</span></span> tener instrucciones <span class="blsp-spelling-error" id="SPELLING_ERROR_48"><span class="blsp-spelling-error" id="SPELLING_ERROR_36">SQL</span></span> o referencias a objetos <span class="blsp-spelling-error" id="SPELLING_ERROR_49"><span class="blsp-spelling-error" id="SPELLING_ERROR_37">ADO</span></span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_50"><span class="blsp-spelling-error" id="SPELLING_ERROR_38">Net</span></span> fuera de aquí.

En otro momento voy a escribir un post dedicado <span class="blsp-spelling-corrected" id="SPELLING_ERROR_51">exclusivamente</span> a objetos <span class="blsp-spelling-error" id="SPELLING_ERROR_52"><span class="blsp-spelling-error" id="SPELLING_ERROR_39">DAO</span></span> y como simplificar esto mediante <span class="blsp-spelling-error" id="SPELLING_ERROR_53"><span class="blsp-spelling-error" id="SPELLING_ERROR_40">ORM</span></span>.


<span style="font-size:130%;"><span style="font-weight: bold;">Para terminar</span></span>

En <span class="blsp-spelling-error" id="SPELLING_ERROR_41">proximos</span> post voy a detallar en mayor medida cada uno de los componentes de esta arquitectura.

Por otra parte, quisiera dejar algunas referencias:<span style="font-size:100%;">
</span>Parte de esta arquitectura esta basada en este artículo:
<a href="http://www.codeproject.com/KB/architecture/NHibernateBestPractices.aspx"><span class="blsp-spelling-error" id="SPELLING_ERROR_42">NHibernate</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_43">Best</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_44">Practices</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_45">with</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_46">ASP</span>.<span class="blsp-spelling-error" id="SPELLING_ERROR_47">NET</span>, 1.2<span class="blsp-spelling-error" id="SPELLING_ERROR_48">nd</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_49">Ed</span>.</a>

<span class="blsp-spelling-error" id="SPELLING_ERROR_50">Ayende</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_51">Rahien</span>:
<a href="http://ayende.com/">http://ayende.com/</a>

<span class="blsp-spelling-error" id="SPELLING_ERROR_52">Jeffrey</span> <span class="blsp-spelling-error" id="SPELLING_ERROR_53">Palermo</span>:
<a href="http://jeffreypalermo.com/">http://jeffreypalermo.com/</a>

Deja tu comentario, saludos!<div class="blogger-post-footer">http://feeds.feedburner.com/JoseFRomaniello<img width='1' height='1' src='https://blogger.googleusercontent.com/tracker/2935908889399243312-5922715052521182808?l=jfromaniello.blogspot.com' alt='' /></div>
