--- 
layout: post
title: RestBucks on .Net; the barista-bot
tags: 
- rest
- RestBucks
status: publish
type: post
published: true
meta: 
  dsq_thread_id: "332957890"
---
<p><em>Previous posts</em></p>  <ul>   <li><a href="http://joseoncode.com/2011/05/31/introducing-restbucks-on-net/"><em>Introducing RestBucks on .Net</em></a> </li>    <li><a href="http://joseoncode.com/2011/06/01/restbucks-on-net-ordering-coffee/"><em>RestBucks on .Net; ordering coffee</em></a><em></em> </li>    <li><a href="http://joseoncode.com/2011/06/03/restbucks-on-net-is-online/"><em>RestBucks on .Net is onilne!</em></a> </li>    <li><em><a href="http://joseoncode.com/2011/06/07/restbucks-on-net-querying-the-order/">RestBucks on .Net; querying the order</a></em> </li>    <li><em><a href="http://joseoncode.com/2011/06/09/restbucks-on-net-canceling-an-order/">RestBucks on .Net; canceling the order</a></em> </li>    <li><em><a href="http://joseoncode.com/2011/06/15/restbucks-on-net-paying-the-order/">RestBucks on .Net; paying the order</a></em> </li> </ul>  <p><img style="margin: 0px 14px 18px 0px; display: inline; float: left" align="left" src="data:image/jpg;base64,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" /></p>  <p>Imagine now that you have another system running in parallel with RestBucks on .Net using the same object domain. This other system is used by the Barista;</p>  <blockquote>   <p>A <b>barista</b> (from the Italian for &quot;bartender&quot;) is a person, usually a coffee-house employee, who prepares and serves <a href="http://en.wikipedia.org/wiki/Espresso">espresso</a>-based <a href="http://en.wikipedia.org/wiki/Coffee">coffee</a> drinks.</p> </blockquote>  <p>What I did in RestBucks was to simulate this behavior; our BaristaBot will pick paid orders each 45 seconds and prepare it. For this purpose I have used some ReactiveExtensions magic:</p>  <pre class="brush: csharp; wrap-line: false;">public class Barista
{
    private readonly ISessionFactory sessionFactory;
    private readonly IDisposable subscription;

    public Barista(ISessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
        subscription = Observable.Interval(TimeSpan.FromSeconds(45))
            .Subscribe(PrepareNextOrder);
    }

    public void PrepareNextOrder(long i)
    {
        using(var session = sessionFactory.OpenSession())
        using(var tx = session.BeginTransaction())
        {
            var order = session.Query&lt;Order&gt;()
                            .Where(o =&gt; o.Status == OrderStatus.Paid)
                            .OrderBy(o =&gt; o.Payment.DateTime)
                            .FirstOrDefault();
            if (order == null) return;
            
            order.Finish();
            
            tx.Commit();
        }
    }

    public void Dispose()
    {
        subscription.Dispose();
    }
}</pre>

<p>I didn't use the repository or other abstractions here to keep things simples. This solution depends on NHibernate and Rx.</p>

<p>You can test the behavior in our live instance at <a href="http://restbuckson.net">http://restbuckson.net</a>. </p>
